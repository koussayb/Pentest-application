import { Box, Modal, TextField } from "@material-ui/core";
import * as React from "react";
import axios from "axios";
import { useHistory } from "react-router-dom";
import "./modal.css";
import { makeStyles } from "@material-ui/core/styles";
import InputLabel from "@material-ui/core/InputLabel";
import FormControl from "@material-ui/core/FormControl";
import Select from "@material-ui/core/Select";
import Button from "@material-ui/core/Button";

const style = {
  position: "absolute",
  top: "50%",
  left: "50%",
  transform: "translate(-50%, -50%)",
  width: "40vw",
  bgcolor: "background.paper",
  border: "2px solid #000",
  boxShadow: 24,
  p: 4,
};
const useStyles1 = makeStyles((theme) => ({
  formControl: {
    margin: theme.spacing(2),
    minWidth: 150,
  },
  selectEmpty: {
    marginTop: theme.spacing(2),
  },
}));
const useStyles = makeStyles((theme) => ({
  root: {
    "& > *": {
      margin: theme.spacing(1.5),
      width: "35ch",
    },
  },
}));

function BasicModal({ open, setOpen }) {
  const history = useHistory();
  const addProject = (event) => {
    event.preventDefault();
    const target = document.getElementById("target").value;
    const description = document.getElementById("description").value;
    const dateObject = new Date(Date.now())
    const humanDateFormat = dateObject.toLocaleString()
    const data = {
      total: "string",
      date: humanDateFormat,
      name: target,
      high: true,
      medium: true,
      low: true,
      description: description
    }


    axios.post(`http://127.0.0.1:8000/projects`, data, {
      headers: {
        Authorization: localStorage.getItem("token"),
      },
    });
  };
  const handleClose = () => setOpen(false);
  const classes = useStyles();
  const classes1 = useStyles1();
  const [state, setState] = React.useState({
    age: "",
    name: "hai",
  });

  const handleChange = (event) => {
    const name = event.target.name;
    setState({
      ...state,
      [name]: event.target.value,
    });
  };
  return (
    <div>
      <Modal
        open={open}
        onClose={handleClose}
        aria-labelledby="modal-modal-title"
        aria-describedby="modal-modal-description"
      >
        <Box sx={style}>
          <form className={classes.root} noValidate autoComplete="off">
            <TextField
              id="target"
              className="standard-basic"
              label="Target URL or Host"
            />{" "}
            <br />
            <TextField
              id="description"
              className="standard-basic"
              label="Description"
            />
          </form>
          <div>
            <FormControl className={classes1.formControl}>
              <InputLabel id="demo-simple-select-label">
                Pentest Type{" "}
              </InputLabel>
              <Select
                native
                value={state.age}
                onChange={handleChange}
                inputProps={{
                  name: "age",
                  id: "age-native-simple",
                }}
              >
                <option aria-label="None" value="" />
                <option>Web</option>
                <option>Network</option>
              </Select>
            </FormControl>
          </div>
          <div className={classes.root}>
            <Button variant="outlined" onClick={addProject}>
              Save
            </Button>
          </div>
        </Box>
      </Modal>
    </div>
  );
}

export default BasicModal;
